root@lxc-super02 /dev # vgcreate lvmraid5_nvme /dev/nvme2n1 /dev/nvme3n1 /dev/nvme4n1
  Physical volume "/dev/nvme2n1" successfully created.
  Physical volume "/dev/nvme3n1" successfully created.
  Physical volume "/dev/nvme4n1" successfully created.
  Volume group "lvmraid5_nvme" successfully created
root@lxc-super02 /dev # lvcreate --type raid5 -l 100%FREE --nosync -n lv_lvmraid5_nvme lvmraid5_nvme
  Using default stripesize 64.00 KiB.
  Rounding size (2747121 extents) down to stripe boundary size (2747120 extents)
  WARNING: New raid5 won't be synchronised. Don't read what you didn't write!
  Logical volume "lv_lvmraid5_nvme" created.
                                                                                          
root@lxc-super02 /dev # mkdir -p /lv_lvmraid5_nvme

root@lxc-super02 /dev # mount /dev/lvmraid5_nvme /lv_lvmraid5_nvme
root@lxc-super02 /dev # mkfs.ext4 /dev/lvmraid5_nvme/lv_lvmraid5_nvme
root@lxc-super02 /dev # mount /dev/lvmraid5_nvme/lv_lvmraid5_nvme /lv_lvmraid5_nvme
root@lxc-super02 /dev # rm -rf /var/lib/snapd/hostfs/lv_lvmraid5_nvme/*
root@lxc-super02 /dev # lxc storage create lv_lvmraid5_nvme dir source=/lv_lvmraid5_nvme
Storage pool lv_lvmraid5_nvme created
root@lxc-super02 /dev # lxc init 23b29233ca2c u18-pgbench-lvmraid5 -s lv_lvmraid5_nvme
Creating u18-pgbench-lvmraid5



lxc config edit u18-pgbench-lvmraid0

  limits.cpu: "4"
  limits.memory: 16GB


/etc/postgresql/13/main/postgresql.conf

shared_buffers = 8GB
#huge_pages = try
work_mem = 32MB
maintenance_work_mem = 1GB
dynamic_shared_memory_type = posix

wal_level = replica      # minimal, replica, or logical
max_wal_senders = 3
checkpoint_timeout = 1200        #default = 300 (5 min)
wal_compression = on
max_wal_size = 8GB
min_wal_size = 80MB
